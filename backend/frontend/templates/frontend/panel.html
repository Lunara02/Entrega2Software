{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel - Tracking App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
</head>
<body>
    <div class="container">
        <h1>Panel de Usuario</h1>

        {# Formulario de logout usando POST al endpoint 'logout' #}
        <form method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit">Cerrar Sesión</button>
        </form>

        <hr>

        {# Secciones de creación de paquete, listado de paquetes, etc.
           De momento, dejamos la estructura como está, 
           pero ya no dependerá de auth.js para validar si hay token. #}

        <!-- Sección: Crear nuevo paquete -->
        <section>
            <h2>Crear Nuevo Paquete</h2>
            {# 
              Aquí podrías reemplazar este <form> por uno que apunte a una vista Django 
              (por ejemplo, 'panel/crear-paquete/') que procese el POST para crear el paquete.
              Si aún no tienes ese endpoint, puedes mantener el formulario estático como placeholder.
            #}
            <form id="crear-paquete-form" method="post" action="">
                {% csrf_token %}
                <div>
                    <label for="destinatario">ID Destinatario:</label>
                    <input type="number" id="destinatario" name="destinatario" required />
                </div>
                <div>
                    <label for="peso">Peso (kg):</label>
                    <input type="number" step="0.01" id="peso" name="peso" required />
                </div>
                <div>
                    <label for="dimensiones">Dimensiones:</label>
                    <input type="text" id="dimensiones" name="dimensiones" required />
                </div>
                <button type="submit">Crear Paquete</button>
            </form>
            <div id="crear-paquete-error" style="color: red;"></div>
            <div id="crear-paquete-success" style="color: green;"></div>
        </section>

        <hr>

        <!-- Sección: Listado de Mis Paquetes -->
        <section>
            <h2>Mis Paquetes</h2>
            <table id="tabla-paquetes" border="1" cellpadding="5">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Destino</th>
                        <th>Peso</th>
                        <th>Dimensiones</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Aquí, si quieres, vas a inyectar filas con datos que la misma vista entregue. -->
                </tbody>
            </table>
            <div id="paquetes-error" style="color: red;"></div>
        </section>

        <hr>

        <!-- Sección: Listado de Conductores -->
        <section>
            <h2>Conductores Registrados</h2>
            <ul id="lista-conductores">
                <!-- Aquí insertaremos la lista de conductores si la vista la pasa en el contexto. -->
            </ul>
            <div id="conductores-error" style="color: red;"></div>
        </section>

        <hr>

        <!-- Sección: Historial de un paquete -->
        <section>
            <h2>Historial de Estado</h2>
            <div>
                <label for="paquete-historial">Selecciona ID de Paquete:</label>
                <input type="number" id="paquete-historial" name="paquete-historial" />
                <button id="ver-historial-btn">Ver Historial</button>
            </div>
            <div id="historial-error" style="color: red;"></div>
            <table id="tabla-historial" border="1" cellpadding="5" style="margin-top: 10px;">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Estado</th>
                        <th>Fecha</th>
                        <th>Actualizado por</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Filas de historial, a inyectar desde la vista si corresponde. -->
                </tbody>
            </table>
        </section>

    </div>
</body>
</html>
