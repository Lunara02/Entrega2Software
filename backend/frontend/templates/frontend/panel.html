{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel - Tracking App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
</head>
<body>
  <div class="todo">
    <div class="form_container">
      <div class="title_container">
        <p class="title">Panel de Usuario</p>
        <span class="subtitle">Administra tus paquetes, conductores y consulta los historiales.</span>
      </div>

      <!-- Formulario de logout -->
      <form method="post" action="{% url 'logout' %}" style="width: 100%;">
        {% csrf_token %}
        <button type="submit" class="sign-in_btn">Cerrar Sesión</button>
      </form>

      <div class="separator">
        <span class="line"></span>
        <span>Acciones</span>
        <span class="line"></span>
      </div>

      <!-- Crear nuevo paquete -->
      <section style="width: 100%;">
        <h2 class="subtitle">Crear Nuevo Paquete</h2>
        <form id="crear-paquete-form" method="post" action="">
          {% csrf_token %}
          <div class="input_container">
            <label class="input_label" for="destinatario">ID Destinatario</label>
            <input type="number" id="destinatario" name="destinatario" class="input_field" required>
          </div>
          <div class="input_container">
            <label class="input_label" for="peso">Peso (kg)</label>
            <input type="number" step="0.01" id="peso" name="peso" class="input_field" required>
          </div>
          <div class="input_container">
            <label class="input_label" for="dimensiones">Dimensiones</label>
            <input type="text" id="dimensiones" name="dimensiones" class="input_field" required>
          </div>
          <button type="submit" class="sign-in_btn">Crear Paquete</button>
        </form>
        <div id="crear-paquete-error" style="color: red; font-size: 0.75rem;"></div>
        <div id="crear-paquete-success" style="color: green; font-size: 0.75rem;"></div>
      </section>

      <div class="separator">
        <span class="line"></span>
        <span>Mis Paquetes</span>
        <span class="line"></span>
      </div>

      <!-- Listado de mis paquetes -->
      <section style="width: 100%;">
        <table id="tabla-paquetes" border="1" cellpadding="5" style="width: 100%; border-collapse: collapse; margin-top: 10px;">
          <thead>
            <tr style="background-color: #f0f0f0;">
              <th>ID</th>
              <th>Destino</th>
              <th>Peso</th>
              <th>Dimensiones</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <!-- Aquí se inyectarán las filas dinámicamente -->
          </tbody>
        </table>
        <div id="paquetes-error" style="color: red; font-size: 0.75rem;"></div>
      </section>

      <div class="separator">
        <span class="line"></span>
        <span>Conductores</span>
        <span class="line"></span>
      </div>

      <!-- Conductores registrados -->
      <section style="width: 100%;">
        <ul id="lista-conductores" style="list-style: none; padding: 0;">
          <!-- Aquí se inyectarán los conductores -->
        </ul>
        <div id="conductores-error" style="color: red; font-size: 0.75rem;"></div>
      </section>

      <div class="separator">
        <span class="line"></span>
        <span>Historial</span>
        <span class="line"></span>
      </div>

      <!-- Historial de estado -->
      <section style="width: 100%;">
        <div class="input_container">
          <label class="input_label" for="paquete-historial">ID de Paquete</label>
          <input type="number" id="paquete-historial" name="paquete-historial" class="input_field" />
        </div>
        <button id="ver-historial-btn" class="sign-in_btn" style="margin-top: 10px;">Ver Historial</button>
        <div id="historial-error" style="color: red; font-size: 0.75rem;"></div>

        <table id="tabla-historial" border="1" cellpadding="5" style="width: 100%; border-collapse: collapse; margin-top: 10px;">
          <thead>
            <tr style="background-color: #f0f0f0;">
              <th>ID</th>
              <th>Estado</th>
              <th>Fecha</th>
              <th>Actualizado por</th>
            </tr>
          </thead>
          <tbody>
            <!-- Aquí se inyectarán los datos del historial -->
          </tbody>
        </table>
      </section>

    </div>
  </div>
</body>
</html>
